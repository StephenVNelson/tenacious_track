<!-- #TODO:10 Create cards that with width that already fits the content inside them -->

<div id="<%= category_name %> Card" class="card border-primary all-edges-rounded my-3" style="flex: 1 1 auto; max-width: <%= card_width %>; display: none;">
  <div class="card-header bg-primary text-white text-center p-0 top-edges-rounded">
    <h5 class="my-2">
      <%= category_name %>
    </h5>
  </div>
  <div class="card-body py-1">
    <% Element.category_elements(category_name).each do |element| %>

      <% association = exercise.exercise_elements.find { |m| m.element_id == element.id } %>

      <% if association %>
        <% existing = true %>
        <% active = "active" %>
      <% else %>
        <% association = exercise.exercise_elements.build(element: element) %>
        <% existing = false %>
        <%= active = "" %>
      <% end %>

      <%= form.fields_for :exercise_elements, association do |association_fields| %>
        <%= association_fields.hidden_field :element_id %>
        <%= association_fields.hidden_field :_destroy, value: 1 %>
        <div class="btn-group-toggle d-inline" data-toggle="buttons">
          <label class="btn btn-outline-primary m-2 element-checkboxes <%= active %>">
            <%= association_fields.check_box :_destroy, {checked: existing, include_hidden: false}, checked_value = 0, unchecked_value = 1  %>
            <%= element.name %>
          </label>
        </div>
      <% end %>
    <% end %>
  </div>
</div>
